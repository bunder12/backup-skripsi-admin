{"ast":null,"code":"import _objectSpread from\"C:/web/login/admin/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"C:/web/login/admin/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/web/login/admin/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/web/login/admin/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{Card,CardContent,TextField,Typography,Button,IconButton,TextareaAutosize}from'@material-ui/core';import{Autocomplete}from'@material-ui/lab';import{Delete,PhotoCamera}from'@material-ui/icons';import ImageUploading from'react-images-uploading';import useStyles from'./styled';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Postwisata=function Postwisata(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),images=_useState2[0],setImages=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),imageList=_useState4[0],setImageList=_useState4[1];var maxNumber=69;var onChange=function onChange(imageList,addUpdateIndex){// data for submit\nsetImageList(imageList);setImages(imageList[0].file);};var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),kategori=_useState6[0],setKategori=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),kategoriId=_useState8[0],setKategoriId=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),formData=_useState10[0],setFormData=_useState10[1];var classes=useStyles();useEffect(function(){setFormData(new FormData());},[]);var handleUpload=function handleUpload(e){var wisata=document.querySelector(\"#wisata\").value;var deskripsi=document.querySelector(\"#deskripsi\").value;var lat=document.querySelector(\"#lat\").value;var lang=document.querySelector(\"#lang\").value;var url=document.querySelector(\"#url\").value;e.preventDefault();formData.set('kategori_id',kategoriId);formData.set('wisata',wisata);formData.set('deskripsi',deskripsi);formData.set('lat',lat);formData.set('lang',lang);formData.set('urlMap',url);formData.append('gambar',images);// const photo = document.getElementById(\"photo\").name;\n// const dataUpload  = {\n//     kategori_id: kategoriId,\n//     wisata: wisata,\n//     deskripsi: deskripsi,\n//     lat: lat,\n//     lang: lang,\n//     urlMap: url,\n//     gambar: images,\n// }\n// console.log(dataUpload)\naxios.post('http://localhost:5000/admin/upload',formData,{headers:{'Content-Type':'multipart/form-data'}}).then(function(res){console.log(res);}).catch(function(err){console.log(err);});};var getKategori=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var kategoriData;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get('http://localhost:5000/admin/getKategori');case 2:kategoriData=_context.sent;setKategori(kategoriData.data.data);case 4:case\"end\":return _context.stop();}}},_callee);}));return function getKategori(){return _ref.apply(this,arguments);};}();useEffect(function(){getKategori();},[]);return/*#__PURE__*/_jsx(\"div\",{className:classes.container,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{children:\"Upload Wisata\"}),/*#__PURE__*/_jsxs(\"div\",{className:classes.areaUpload,children:[/*#__PURE__*/_jsx(Autocomplete,{style:{margin:'20px 0'},options:kategori,renderInput:function renderInput(params){return/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({},params),{},{label:\"Kategori\",variant:\"outlined\"}));},getOptionLabel:function getOptionLabel(option){return option.kategori;},onChange:function onChange(_event,kategoris){setKategoriId(kategoris._id);}}),/*#__PURE__*/_jsx(TextField,{style:{marginBottom:'20px'},variant:\"outlined\",id:\"wisata\",label:\"Nama Wisata\"}),/*#__PURE__*/_jsx(Card,{className:classes.cardDeskripsi,children:/*#__PURE__*/_jsx(CardContent,{className:classes.cardContentDeskripsi,children:/*#__PURE__*/_jsx(TextField,{className:classes.deskripsi,id:\"deskripsi\",label:\"Description\",multiline:true,maxRows:4,variant:\"standard\",InputProps:{disableUnderline:true}})})}),/*#__PURE__*/_jsx(TextField,{style:{marginBottom:'20px'},variant:\"outlined\",id:\"lat\",label:\"Lat\"}),/*#__PURE__*/_jsx(TextField,{style:{marginBottom:'20px'},variant:\"outlined\",id:\"lang\",label:\"Lang\"}),/*#__PURE__*/_jsx(TextField,{style:{marginBottom:'20px'},variant:\"outlined\",id:\"url\",label:\"Url Map\"}),/*#__PURE__*/_jsx(Typography,{children:\"Pilih Foto Wisata\"}),/*#__PURE__*/_jsx(ImageUploading,{value:images,onChange:onChange,maxNumber:maxNumber,dataURLKey:\"data_url\",children:function children(_ref2){var onImageUpload=_ref2.onImageUpload,onImageUpdate=_ref2.onImageUpdate,onImageRemoveAll=_ref2.onImageRemoveAll,dragProps=_ref2.dragProps;return/*#__PURE__*/_jsxs(\"div\",{className:\"upload__image-wrapper\",children:[/*#__PURE__*/_jsx(Button,_objectSpread(_objectSpread({onClick:onImageUpload},dragProps),{},{style:{marginBottom:'16px'},variant:\"contained\",component:\"span\",color:\"primary\",startIcon:/*#__PURE__*/_jsx(PhotoCamera,{}),children:\"Change Photo\"})),imageList.map(function(image,index){return/*#__PURE__*/_jsxs(\"div\",{className:\"image-item\",children:[/*#__PURE__*/_jsx(\"img\",{src:image.data_url,alt:\"\",width:\"100\"}),/*#__PURE__*/_jsx(\"div\",{className:\"image-item__btn-wrapper\",children:/*#__PURE__*/_jsx(IconButton,{onClick:onImageRemoveAll,children:/*#__PURE__*/_jsx(Delete,{style:{color:'red'}})})})]},index);})]});}}),/*#__PURE__*/_jsx(Button,{onClick:handleUpload,variant:\"contained\",color:\"primary\",children:\"Upload\"})]})]})})});};export default Postwisata;","map":{"version":3,"names":["React","useEffect","useState","Card","CardContent","TextField","Typography","Button","IconButton","TextareaAutosize","Autocomplete","Delete","PhotoCamera","ImageUploading","useStyles","axios","Postwisata","images","setImages","imageList","setImageList","maxNumber","onChange","addUpdateIndex","file","kategori","setKategori","kategoriId","setKategoriId","formData","setFormData","classes","FormData","handleUpload","e","wisata","document","querySelector","value","deskripsi","lat","lang","url","preventDefault","set","append","post","headers","then","res","console","log","catch","err","getKategori","get","kategoriData","data","container","areaUpload","margin","params","option","_event","kategoris","_id","marginBottom","cardDeskripsi","cardContentDeskripsi","disableUnderline","onImageUpload","onImageUpdate","onImageRemoveAll","dragProps","map","image","index","data_url","color"],"sources":["C:/web/login/admin/src/components/postwisata/postwisata.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport { Card, CardContent, TextField, Typography, Button, IconButton, TextareaAutosize } from '@material-ui/core'\r\nimport { Autocomplete } from '@material-ui/lab'\r\nimport { Delete, PhotoCamera } from '@material-ui/icons'\r\nimport ImageUploading from 'react-images-uploading'\r\nimport useStyles from './styled'\r\nimport axios from 'axios'\r\n\r\nconst Postwisata = () => {\r\n\r\nconst [images, setImages] = useState([]);\r\nconst [imageList, setImageList] = useState([]);\r\n  const maxNumber = 69;\r\n  const onChange = (imageList, addUpdateIndex) => {\r\n    // data for submit\r\n    setImageList(imageList);\r\n    setImages(imageList[0].file);\r\n  };\r\n\r\n    const [kategori, setKategori] = useState([]);\r\n    const [kategoriId, setKategoriId] = useState();\r\n    const [formData, setFormData] = useState('');\r\n    const classes = useStyles();\r\n\r\n    useEffect(() => {\r\n        setFormData(new FormData())\r\n    }, [])\r\n\r\n    const handleUpload = (e) => {\r\n        \r\n        const wisata = document.querySelector(\"#wisata\").value;\r\n        const deskripsi = document.querySelector(\"#deskripsi\").value;\r\n        const lat = document.querySelector(\"#lat\").value;\r\n        const lang = document.querySelector(\"#lang\").value;\r\n        const url = document.querySelector(\"#url\").value;\r\n\r\n        e.preventDefault();\r\n        formData.set('kategori_id', kategoriId);\r\n        formData.set('wisata', wisata);\r\n        formData.set('deskripsi', deskripsi);\r\n        formData.set('lat', lat);\r\n        formData.set('lang', lang);\r\n        formData.set('urlMap', url);\r\n        formData.append('gambar', images);\r\n        // const photo = document.getElementById(\"photo\").name;\r\n\r\n        // const dataUpload  = {\r\n        //     kategori_id: kategoriId,\r\n        //     wisata: wisata,\r\n        //     deskripsi: deskripsi,\r\n        //     lat: lat,\r\n        //     lang: lang,\r\n        //     urlMap: url,\r\n        //     gambar: images,\r\n        // }\r\n        // console.log(dataUpload)\r\n        axios.post('http://localhost:5000/admin/upload', formData, {\r\n            headers: {\r\n                'Content-Type': 'multipart/form-data'\r\n            }\r\n        })\r\n        .then(res => {\r\n            console.log(res)\r\n        })\r\n        .catch(err => {\r\n            console.log(err)\r\n        })\r\n    }\r\n\r\n    const getKategori = async () => {\r\n        const kategoriData = await axios.get('http://localhost:5000/admin/getKategori');\r\n        setKategori(kategoriData.data.data)\r\n    }\r\n\r\n    useEffect(() => {\r\n        getKategori();\r\n    }, [])\r\n\r\n  return (\r\n    <div className={classes.container}>\r\n        <Card>\r\n            <CardContent>\r\n                <Typography>Upload Wisata</Typography>\r\n                <div className={classes.areaUpload}>\r\n                <Autocomplete\r\n                    style={{margin: '20px 0'}}\r\n                    options={kategori}\r\n                    renderInput={params => (\r\n                    <TextField {...params} label=\"Kategori\" variant=\"outlined\" />\r\n                  )}\r\n                  getOptionLabel={option => option.kategori}\r\n                  onChange={(_event, kategoris) => {\r\n                    setKategoriId(kategoris._id);\r\n                  }}\r\n                />\r\n                <TextField style={{marginBottom: '20px'}} variant='outlined' id='wisata' label='Nama Wisata'/>\r\n                <Card className={classes.cardDeskripsi}>\r\n                <CardContent className={classes.cardContentDeskripsi}>\r\n                <TextField\r\n                    className={classes.deskripsi}\r\n                    id='deskripsi'\r\n                    label=\"Description\"\r\n                    multiline\r\n                    maxRows={4}\r\n                    variant=\"standard\"\r\n                    InputProps={{\r\n                        disableUnderline: true,\r\n                      }}\r\n                    />\r\n                {/* <TextareaAutosize className={classes.deskripsi} placeholder='Description' maxRows={4} id='deskripsi'/> */}\r\n                </CardContent>\r\n                </Card>\r\n                <TextField style={{marginBottom: '20px'}} variant='outlined' id='lat' label='Lat'/>\r\n                <TextField style={{marginBottom: '20px'}} variant='outlined' id='lang' label='Lang'/>\r\n                <TextField style={{marginBottom: '20px'}} variant='outlined' id='url' label='Url Map'/>\r\n                <Typography>Pilih Foto Wisata</Typography>\r\n                <ImageUploading\r\n                value={images}\r\n                onChange={onChange}\r\n                maxNumber={maxNumber}\r\n                dataURLKey=\"data_url\"\r\n                >\r\n                    {({\r\n                        onImageUpload,\r\n                        onImageUpdate,\r\n                        onImageRemoveAll,\r\n                        dragProps\r\n                        }) => (\r\n                            <div className=\"upload__image-wrapper\">\r\n                            <Button onClick={onImageUpload}\r\n                            {...dragProps} style={{marginBottom: '16px'}} variant=\"contained\" component=\"span\" color='primary' startIcon={<PhotoCamera/>}>\r\n                                Change Photo\r\n                            </Button>\r\n                            {imageList.map((image, index) => (\r\n                                <div key={index} className=\"image-item\">\r\n                                  <img src={image.data_url} alt=\"\" width=\"100\" />\r\n                                  <div className=\"image-item__btn-wrapper\">\r\n                                      <IconButton onClick={onImageRemoveAll}>\r\n                                          <Delete style={{color: 'red'}}/>\r\n                                      </IconButton>\r\n                                  </div>\r\n                                </div>\r\n                              ))}\r\n                              </div>\r\n                        )}\r\n                </ImageUploading>\r\n                <Button onClick={handleUpload} variant='contained' color='primary'>Upload</Button>\r\n                </div>\r\n            </CardContent>\r\n        </Card>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Postwisata"],"mappings":"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"},"metadata":{},"sourceType":"module"}